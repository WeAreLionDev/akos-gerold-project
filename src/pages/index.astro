---
import AboutMeSection from 'src/components/homepage/AboutMeSection.astro'
import HeroSection from 'src/components/homepage/HeroSection.astro'
import MyClientsSection from 'src/components/homepage/MyClientsSection.astro'
import OfferHelpSection from 'src/components/homepage/OfferHelpSection.astro'
import ServiceSection from 'src/components/homepage/ServiceSection.astro'
import WelcomeSection from 'src/components/homepage/WelcomeSection.astro'
import WhatMyClientsThinkSection from 'src/components/homepage/WhatMyClientsThinkSection.astro'
import WorkWithMeSection from 'src/components/homepage/WorkWithMeSection.astro'
import Layout from 'src/layouts/Layout.astro'
import { useGetHomepageQuery } from 'src/clients/sanity/queries/homepage/Homepage.queries'

export async function getHomepage() {
  return await useGetHomepageQuery()
}

const {
  title,
  metaDescription,
  aboutMeSection,
  clientSection,
  heroSection,
  services,
  testimonialSection,
  welcomeSection,
  workWithMeSection,
} = await getHomepage()
---

<Layout title={title} description={metaDescription}>
  <HeroSection {...heroSection} />
  <WelcomeSection {...welcomeSection} />
  <MyClientsSection {...clientSection} />
  <OfferHelpSection />
  {services.map((service) => <ServiceSection {...service} />)}
  <WhatMyClientsThinkSection {...testimonialSection} />
  <AboutMeSection {...aboutMeSection} />
  <WorkWithMeSection {...workWithMeSection} />
</Layout>
